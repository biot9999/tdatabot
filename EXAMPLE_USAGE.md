# ğŸ›¡ï¸ é˜²æ­¢æ‰¾å›åŠŸèƒ½ä½¿ç”¨ç¤ºä¾‹

## å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡æ–‡ä»¶

å°†ä½ çš„Telegramè´¦å·æ–‡ä»¶æ‰“åŒ…æˆZIPï¼š

```
accounts.zip
â”œâ”€â”€ account1.session
â”œâ”€â”€ account1.json
â”œâ”€â”€ account2.session
â”œâ”€â”€ account2.json
â””â”€â”€ account3/         (TDataæ ¼å¼)
    â””â”€â”€ tdata/
        â””â”€â”€ D877F783D5D3EF8C/
```

### 2. å¯åŠ¨æœºå™¨äºº

```bash
python3 tdata.py
```

### 3. ä½¿ç”¨ç•Œé¢æ“ä½œ

1. æ‰“å¼€Telegramæ‰¾åˆ°ä½ çš„æœºå™¨äºº
2. å‘é€ `/start` å‘½ä»¤
3. ç‚¹å‡» **ğŸ›¡ï¸ é˜²æ­¢æ‰¾å›** æŒ‰é’®
4. ä¸Šä¼ å‡†å¤‡å¥½çš„ZIPæ–‡ä»¶
5. ç­‰å¾…å¤„ç†å®Œæˆ

### 4. æŸ¥çœ‹ç»“æœ

æœºå™¨äººä¼šè‡ªåŠ¨å‘é€ï¼š
- ğŸ“„ æ±‡æ€»æŠ¥å‘Šï¼ˆTXTï¼‰
- ğŸ“Š è¯¦ç»†æŠ¥å‘Šï¼ˆCSVï¼‰
- ğŸ“¦ ç»“æœå½’æ¡£ï¼ˆZIPï¼‰

## é…ç½®ç¤ºä¾‹

### .env é…ç½®æ–‡ä»¶

```env
# BotåŸºç¡€é…ç½®
TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
API_ID=12345678
API_HASH=abcdef1234567890abcdef1234567890
ADMIN_IDS=123456789

# é˜²æ­¢æ‰¾å›é…ç½®
RECOVERY_CONCURRENT=10          # åŒæ—¶å¤„ç†10ä¸ªè´¦å·
RECOVERY_CODE_TIMEOUT=300       # ç­‰å¾…éªŒè¯ç 5åˆ†é’Ÿ
RECOVERY_PASSWORD_LENGTH=14     # ç”Ÿæˆ14ä½å¯†ç 
RECOVERY_ENABLE_PROXY=true      # å¯ç”¨ä»£ç†
```

### ä»£ç†é…ç½® (proxy.txt)

```
# HTTPä»£ç†
192.168.1.100:8080

# å¸¦è®¤è¯çš„HTTPä»£ç†
192.168.1.101:8080:username:password

# SOCKS5ä»£ç†
socks5:192.168.1.102:1080:username:password

# ä½å®…ä»£ç†ï¼ˆABCProxyï¼‰
f01a4db3d3952561.abcproxy.vip:4950:username:password
```

## å¤„ç†æµç¨‹æ¼”ç¤º

### è¿›åº¦æ˜¾ç¤º

```
ğŸ›¡ï¸ é˜²æ­¢æ‰¾å›ä¿æŠ¤å¤„ç†ä¸­...

ğŸ“Š æ‰¾åˆ° 50 ä¸ªè´¦å·æ–‡ä»¶
ğŸ”„ ç±»å‹: SESSION
âš™ï¸ å¹¶å‘: 10

â³ æ­£åœ¨å¤„ç†...
```

â†“

```
ğŸ›¡ï¸ é˜²æ­¢æ‰¾å›è¿›åº¦

å·²å¤„ç†: 25/50
æˆåŠŸ: 20 | å¤±è´¥: 2 | è¶…æ—¶: 1 | å¼‚å¸¸: 1 | éƒ¨åˆ†: 1
å¹³å‡è€—æ—¶: 42.5s

â³ è¯·ç¨å€™...
```

â†“

```
âœ… é˜²æ­¢æ‰¾å›å¤„ç†å®Œæˆ

ğŸ“Š å¤„ç†ç»Ÿè®¡
â€¢ æ€»æ•°: 50
â€¢ æˆåŠŸ: 42
â€¢ å¤±è´¥: 3
â€¢ å¼‚å¸¸: 2
â€¢ è¶…æ—¶: 2
â€¢ éƒ¨åˆ†: 1

â±ï¸ è€—æ—¶
â€¢ æ€»è€—æ—¶: 2125.3ç§’
â€¢ å¹³å‡: 42.5ç§’/è´¦å·

ğŸ“¦ ç»“æœæ–‡ä»¶
æ­£åœ¨å‘é€è¯¦ç»†æŠ¥å‘Šå’Œå½’æ¡£æ–‡ä»¶...
```

## ç»“æœæ–‡ä»¶ç¤ºä¾‹

### æ±‡æ€»æŠ¥å‘Š (summary.txt)

```
é˜²æ­¢æ‰¾å›æ‰¹æ¬¡æŠ¥å‘Š - 20240119_143022
==================================================

æ€»æ•°: 50
æˆåŠŸ: 42
å¤±è´¥: 3
å¼‚å¸¸: 2
è¶…æ—¶: 2
éƒ¨åˆ†: 1
```

### è¯¦ç»†æŠ¥å‘Š (detail.csv)

```csv
è´¦å·,æ‰‹æœºå·,çŠ¶æ€,å¤±è´¥åŸå› ,ä»£ç†,å¯†ç (è„±æ•),æ€»è€—æ—¶
account1.session,+1234567890,success,,socks5 1.2.3.4:1080(ok 2.3s),Abc***xyz,47.5s
account2.session,+9876543210,timeout,ç­‰å¾…éªŒè¯ç è¶…æ—¶,Local(1.2s),,305.2s
account3.session,+1112223333,abnormal,TDataè‡ªåŠ¨è½¬æ¢åŠŸèƒ½å¾…å®ç°,,,1.2s
account4.session,+4445556666,partial,å®Œæ•´é˜²æ‰¾å›æµç¨‹å¾…å®ç°ï¼ˆå·²å®Œæˆè¿æ¥éªŒè¯),socks5 1.2.3.4:1080(ok 1.8s),,38.9s
```

### å½’æ¡£æ–‡ä»¶ç»“æ„ (archives.zip)

```
batch_20240119_143022_archives.zip
â”œâ”€â”€ batch_20240119_143022_summary.txt
â”œâ”€â”€ batch_20240119_143022_detail.csv
â”œâ”€â”€ safe_sessions/
â”‚   â”œâ”€â”€ account1.session
â”‚   â”œâ”€â”€ account1.json
â”‚   â”œâ”€â”€ account4.session
â”‚   â””â”€â”€ account4.json
â”œâ”€â”€ abnormal/
â”‚   â”œâ”€â”€ account3.session
â”‚   â””â”€â”€ account3.json
â”œâ”€â”€ code_timeout/
â”‚   â”œâ”€â”€ account2.session
â”‚   â””â”€â”€ account2.json
â””â”€â”€ failed/
    â””â”€â”€ ...
```

## ç¨‹åºåŒ–ä½¿ç”¨ç¤ºä¾‹

### Pythonè„šæœ¬è°ƒç”¨

```python
import asyncio
from tdata import RecoveryProtectionManager, ProxyManager, Database, Config

async def main():
    # åˆå§‹åŒ–
    config = Config()
    db = Database(config.DB_NAME)
    proxy_manager = ProxyManager(config.PROXY_FILE)
    recovery_manager = RecoveryProtectionManager(proxy_manager, db)
    
    # å‡†å¤‡æ–‡ä»¶åˆ—è¡¨
    files = [
        ('/path/to/account1.session', 'session'),
        ('/path/to/account2.session', 'session'),
    ]
    
    # å®šä¹‰è¿›åº¦å›è°ƒ
    def progress_callback(current, total, stats):
        print(f"Progress: {current}/{total}")
        print(f"Stats: {stats}")
    
    # è¿è¡Œæ‰¹å¤„ç†
    report_data = await recovery_manager.run_batch(files, progress_callback)
    
    # ç”ŸæˆæŠ¥å‘Š
    txt_path, csv_path, zip_path = recovery_manager.generate_reports(report_data)
    
    print(f"Reports generated:")
    print(f"  TXT: {txt_path}")
    print(f"  CSV: {csv_path}")
    print(f"  ZIP: {zip_path}")

# è¿è¡Œ
asyncio.run(main())
```

## å¸¸è§åœºæ™¯

### åœºæ™¯1ï¼šå¤„ç†çº¯Sessionæ–‡ä»¶

```
è¾“å…¥ï¼š
â”œâ”€â”€ account1.session
â”œâ”€â”€ account1.json
â”œâ”€â”€ account2.session
â””â”€â”€ account2.json

ç»“æœï¼š
â”œâ”€â”€ safe_sessions/         # å¤„ç†æˆåŠŸçš„è´¦å·
â”œâ”€â”€ partial/              # éƒ¨åˆ†æˆåŠŸçš„è´¦å·
â””â”€â”€ reports/              # è¯¦ç»†æŠ¥å‘Š
```

### åœºæ™¯2ï¼šæ··åˆTDataå’ŒSession

```
è¾“å…¥ï¼š
â”œâ”€â”€ tdata1/               # TDataæ ¼å¼
â”œâ”€â”€ tdata2/
â”œâ”€â”€ account1.session      # Sessionæ ¼å¼
â””â”€â”€ account1.json

ç»“æœï¼š
â”œâ”€â”€ safe_sessions/        # æˆåŠŸçš„Session
â”œâ”€â”€ abnormal/            # TDataï¼ˆéœ€è¦é¢„è½¬æ¢ï¼‰
â””â”€â”€ reports/
```

### åœºæ™¯3ï¼šä½¿ç”¨ä»£ç†å¤„ç†

```
é…ç½®ï¼š
RECOVERY_ENABLE_PROXY=true

ä»£ç†åˆ—è¡¨ï¼ˆproxy.txtï¼‰ï¼š
socks5:1.2.3.4:1080:user:pass
socks5:2.3.4.5:1080:user:pass

ç»“æœï¼š
æ¯ä¸ªè´¦å·ä¼šè‡ªåŠ¨å°è¯•ä½¿ç”¨ä»£ç†
å¤±è´¥æ—¶å›é€€åˆ°æœ¬åœ°è¿æ¥
è¯¦ç»†ä¿¡æ¯è®°å½•åœ¨CSVæŠ¥å‘Šä¸­
```

## æ•…éšœæ’æŸ¥ç¤ºä¾‹

### é—®é¢˜ï¼šéªŒè¯ç è¶…æ—¶

**ç—‡çŠ¶**ï¼š
```
çŠ¶æ€: timeout
å¤±è´¥åŸå› : ç­‰å¾…éªŒè¯ç è¶…æ—¶
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥è´¦å·èƒ½å¦æ¥æ”¶777000æ¶ˆæ¯
2. å¢åŠ è¶…æ—¶æ—¶é—´ï¼š`RECOVERY_CODE_TIMEOUT=600`
3. ç¡®è®¤è´¦å·æœªè¢«é™åˆ¶

### é—®é¢˜ï¼šè¿æ¥å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
çŠ¶æ€: failed
å¤±è´¥åŸå› : è¿æ¥æ—§sessionå¤±è´¥: timeout
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ä»£ç†æ˜¯å¦æ­£å¸¸
2. å°è¯•ç¦ç”¨ä»£ç†ï¼š`RECOVERY_ENABLE_PROXY=false`
3. éªŒè¯API_IDå’ŒAPI_HASHæ­£ç¡®
4. ç¡®è®¤sessionæ–‡ä»¶æœ‰æ•ˆ

### é—®é¢˜ï¼šæ ¼å¼å¼‚å¸¸

**ç—‡çŠ¶**ï¼š
```
çŠ¶æ€: abnormal
å¤±è´¥åŸå› : TDataè‡ªåŠ¨è½¬æ¢åŠŸèƒ½å¾…å®ç°
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å…ˆä½¿ç”¨æ ¼å¼è½¬æ¢åŠŸèƒ½å°†TDataè½¬ä¸ºSession
2. ç„¶åå†ä½¿ç”¨é˜²æ­¢æ‰¾å›åŠŸèƒ½
3. æˆ–ç­‰å¾…TDataè‡ªåŠ¨è½¬æ¢åŠŸèƒ½å®Œå–„

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### å¤§æ‰¹é‡å¤„ç†

```env
# å¢åŠ å¹¶å‘æ•°ï¼ˆæ ¹æ®æœºå™¨æ€§èƒ½ï¼‰
RECOVERY_CONCURRENT=20

# å‡å°‘è¶…æ—¶æ—¶é—´ï¼ˆå¦‚æœéªŒè¯ç é€šå¸¸å¾ˆå¿«åˆ°è¾¾ï¼‰
RECOVERY_CODE_TIMEOUT=180

# å¯ç”¨å¿«é€Ÿæ¨¡å¼
PROXY_FAST_MODE=true
```

### ç½‘ç»œä¸ç¨³å®šç¯å¢ƒ

```env
# é™ä½å¹¶å‘æ•°
RECOVERY_CONCURRENT=5

# å¢åŠ è¶…æ—¶æ—¶é—´
RECOVERY_CODE_TIMEOUT=600

# å¢åŠ ä»£ç†é‡è¯•æ¬¡æ•°
RECOVERY_PROXY_RETRIES=3
```

## å®‰å…¨æç¤º

1. **å¯†ç å®‰å…¨**
   - ç”Ÿæˆçš„å¯†ç ä»…åœ¨æŠ¥å‘Šä¸­è„±æ•æ˜¾ç¤º
   - å®é™…å¯†ç ä¸ä¼šå†™å…¥æ•°æ®åº“
   - å»ºè®®å®šæœŸå¤‡ä»½å¤„ç†åçš„è´¦å·

2. **æ–‡ä»¶å®‰å…¨**
   - å¤„ç†åçš„æ–‡ä»¶ä¿å­˜åœ¨results/recovery/ç›®å½•
   - å»ºè®®åŠ å¯†å­˜å‚¨å½’æ¡£æ–‡ä»¶
   - åŠæ—¶æ¸…ç†ä¸´æ—¶æ–‡ä»¶

3. **è´¦å·å®‰å…¨**
   - å¤„ç†å‰ç¡®è®¤è´¦å·çŠ¶æ€æ­£å¸¸
   - å¤„ç†åéªŒè¯æ–°è®¾å¤‡ç™»å½•æˆåŠŸ
   - å®šæœŸæ£€æŸ¥è®¾å¤‡æˆæƒåˆ—è¡¨

## æ€»ç»“

é˜²æ­¢æ‰¾å›åŠŸèƒ½æä¾›äº†ï¼š
- âœ… è‡ªåŠ¨åŒ–çš„è´¦å·è¿ç§»æµç¨‹
- âœ… æ™ºèƒ½çš„é”™è¯¯åˆ†ç±»å’Œå¤„ç†
- âœ… è¯¦ç»†çš„æ—¥å¿—å’ŒæŠ¥å‘Š
- âœ… çµæ´»çš„é…ç½®é€‰é¡¹
- âœ… å®Œå–„çš„å®‰å…¨æœºåˆ¶

å¼€å§‹ä½¿ç”¨å§ï¼ğŸš€
